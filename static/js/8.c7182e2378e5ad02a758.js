webpackJsonp([8],{AwFO:function(t,e){},kHwV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("hcrA"),a=n.n(i),s=n("KH7x"),r=n.n(s),o=n("IHPB"),c=n.n(o),l=n("rVsN"),u=n.n(l),h=n("lC5x"),d=n.n(h),p=n("hRKE"),v=n.n(p),m=n("J0Oq"),f=n.n(m),b=n("AA3o"),_=n.n(b),g=n("xSur"),y=n.n(g),k=n("72mw"),w=n.n(k),x=n("zf2T");function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==e?Object(x.a)(t):e>0?Object(x.a)(t).times(Object(x.a)("1"+"0".repeat(e))):Object(x.a)(t).div(Object(x.a)("1"+"0".repeat(-e)))}function R(t){return C(t,-18)}function B(t,e){return t.gte(e)?t:e}x.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:x.a.ROUND_DOWN,EXPONENTIAL_AT:256});var T=new(function(){function t(){_()(this,t),this.web3=null,this.ethereum=null,this.account=null,this.oracleUrl=null,this.addresses=null,this.abifiles=null,this.methods=null,this.pool=null,this.bToken=null,this.pToken=null,this.lToken=null,this.symbol=null,this.bSymbol=null,this.bDecimals=null,this.multiplier=null,this.feeRatio=null,this.minPoolMarginRatio=null,this.minInitialMarginRatio=null,this.minMaintenanceMarginRatio=null,this.minAddLiquidity=null,this.redemptionFeeRatio=null,this.fundingRateCoefficient=null,this.minLiquidationReward=null,this.maxLiquidationReward=null,this.liquidationCutRatio=null,this.priceDelayAllowance=null,this.oracle={},this.balance={},this.position={volume:C(0),cost:C(0),lastCumuFundingRate:C(0),margin:C(0),lastUpdateTimestamp:C(0)},this.states={}}return y()(t,[{key:"connectWallet",value:function(){var t=f()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0==v()(window.ethereum)){t.next=9;break}return this.web3=new w.a(ethereum),this.ethereum=window.ethereum,t.next=5,ethereum.request({method:"eth_requestAccounts"});case 5:return this.account=t.sent[0],t.abrupt("return",{success:!0,account:this.account});case 9:return t.abrupt("return",{success:!1,error:"Cannot connect wallet"});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"initialize",value:function(){var t=f()(d.a.mark(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initializeContracts(e);case 2:return t.next=4,this._initializeParameters();case 4:return t.next=6,u.a.all([this._updateBalance(),this._updatePosition(),this._updateStates(),this._updateOracle(),this._bindEvent()]);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"format",value:function(t){return t.toFormat().replaceAll(",","").toString()}},{key:"mint",value:function(){var t=f()(d.a.mark(function t(e,n){var i,a,s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),i=Math.pow(10,this.bDecimals),n=this.format(new x.a(n).multipliedBy(i)),console.log("amount",n),a=void 0,t.prev=5,t.next=8,this._transact(this.bToken,"mint",[e,n]);case 8:s=t.sent,a={success:!0,transaction:s},t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),a={success:!1,error:t.t0};case 15:return t.abrupt("return",a);case 16:case"end":return t.stop()}},t,this,[[5,12]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_bindEvent",value:function(){var t=f()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.ethereum.on("accountsChanged",function(t){window.location.reload()}),this.ethereum.on("chainChanged",function(t){window.location.reload()});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_call",value:function(){var t=f()(d.a.mark(function t(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(i=e.methods)[this.methods[n]].apply(i,c()(a)).call();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_transact",value:function(){var t=f()(d.a.mark(function t(e,n){var i,a,s,r,o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(l),a=0,s=0;case 3:if(!(s<20)){t.next=17;break}return t.prev=4,t.next=7,(r=e.methods)[this.methods[n]].apply(r,c()(l)).estimateGas({from:this.account});case 7:return a=t.sent,a=parseInt(1.25*a),t.abrupt("break",17);case 12:t.prev=12,t.t0=t.catch(4);case 14:s++,t.next=3;break;case 17:return 0==a&&(a=532731),t.next=20,(i=e.methods)[this.methods[n]].apply(i,c()(l)).send({from:this.account,gas:a});case 20:return o=t.sent,t.abrupt("return",o);case 22:case"end":return t.stop()}},t,this,[[4,12]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_transactPool",value:function(){var t=f()(d.a.mark(function t(e,n){var i,a,s,r,o,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[this.oracle.timestamp,this.oracle.price,this.oracle.v,this.oracle.r,this.oracle.s],s=0,console.log(a,u),r=0;case 4:if(!(r<20)){t.next=18;break}return t.prev=5,t.next=8,(o=e.methods)[this.methods[n]].apply(o,c()(u).concat(a)).estimateGas({from:this.account});case 8:return s=t.sent,s=parseInt(1.25*s),t.abrupt("break",18);case 13:t.prev=13,t.t0=t.catch(5);case 15:r++,t.next=4;break;case 18:return 0==s&&(s=532731),t.next=21,(i=e.methods)[this.methods[n]].apply(i,c()(u).concat(a)).send({from:this.account,gas:s});case 21:return l=t.sent,t.abrupt("return",l);case 23:case"end":return t.stop()}},t,this,[[5,13]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_readjson",value:function(){var t=f()(d.a.mark(function t(e){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("static/fconfig/"+e);case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_initializeContracts",value:function(){var t=f()(d.a.mark(function t(e){var n,i,a,s,o,c,l;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,this._readjson("config.json");case 4:return n=t.sent,this.oracleUrl=n.oracleUrl,this.addresses=n.addresses[e],this.abifiles=n.abifiles,this.methods=n.methods,t.next=11,u.a.all([this._readjson(this.abifiles.pool),this._readjson(this.abifiles.bToken),this._readjson(this.abifiles.pToken),this._readjson(this.abifiles.lToken)]);case 11:i=t.sent,a=r()(i,4),s=a[0],o=a[1],c=a[2],l=a[3],this.pool=new this.web3.eth.Contract(s,this.addresses.pool),this.bToken=new this.web3.eth.Contract(o,this.addresses.bToken),this.pToken=new this.web3.eth.Contract(c,this.addresses.pToken),this.lToken=new this.web3.eth.Contract(l,this.addresses.lToken),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(1),console.log("Chain: _initializeContracts() error: "+t.t0);case 26:case"end":return t.stop()}},t,this,[[1,23]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_initializeParameters",value:function(){var t=f()(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pool,"symbol");case 3:return this.symbol=t.sent,t.next=6,this._call(this.bToken,"symbol");case 6:return this.bSymbol=t.sent,t.next=9,this._call(this.bToken,"decimals");case 9:return this.bDecimals=t.sent,t.next=12,this._call(this.pool,"getParameters");case 12:e=t.sent,this.multiplier=R(e.multiplier),this.feeRatio=R(e.feeRatio),this.minPoolMarginRatio=R(e.minPoolMarginRatio),this.minInitialMarginRatio=R(e.minInitialMarginRatio),this.minMaintenanceMarginRatio=R(e.minMaintenanceMarginRatio),this.minAddLiquidity=R(e.minAddLiquidity),this.redemptionFeeRatio=R(e.redemptionFeeRatio),this.fundingRateCoefficient=R(e.fundingRateCoefficient),this.minLiquidationReward=R(e.minLiquidationReward),this.maxLiquidationReward=R(e.maxLiquidationReward),this.liquidationCutRatio=R(e.liquidationCutRatio),this.priceDelayAllowance=C(e.priceDelayAllowance),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(0),console.log("Chain: _initializeParameters() error: "+t.t0);case 30:case"end":return t.stop()}},t,this,[[0,27]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updateBalance",value:function(){var t=f()(d.a.mark(function t(){var e,n,i,a,s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.all([this._call(this.bToken,"balanceOf",[this.account]),this._call(this.lToken,"balanceOf",[this.account]),this._call(this.lToken,"totalSupply")]);case 3:e=t.sent,n=r()(e,3),i=n[0],a=n[1],s=n[2],this.balance.btoken=C(i,-this.bDecimals),this.balance.ltoken=R(a),this.balance.ltotal=R(s),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updatePosition",value:function(){var t=f()(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pToken,"getPosition",[this.account]);case 3:e=t.sent,this.position.volume=R(e[1]),this.position.cost=R(e[2]),this.position.lastCumuFundingRate=R(e[3]),this.position.margin=R(e[4]),this.position.lastUpdateTimestamp=C(e[5]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updateStates",value:function(){var t=f()(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pool,"getStateValues");case 3:e=t.sent,this.states.cumuFundingRate=R(e.cumuFundingRate),this.states.cumuFundingRateBlock=C(e.cumuFundingRateBlock),this.states.liquidity=R(e.liquidity),this.states.tradersNetVolume=R(e.tradersNetVolume),this.states.tradersNetCost=R(e.tradersNetCost),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updateOracle",value:function(){var t=f()(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.oracleUrl);case 3:return e=t.sent,t.next=6,e.json();case 6:this.oracle=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"_calculateShareValue",value:function(t){return this.balance.ltotal.eq(0)?C(0):this.states.liquidity.div(this.balance.ltotal)}},{key:"_calculateMaxRemovableShares",value:function(t){var e,n,i=this._calculateShareValue(),a=this.states.tradersNetVolume.times(t).times(this.multiplier),s=this.states.liquidity.plus(this.states.tradersNetCost).minus(a).minus(a.abs().times(this.minPoolMarginRatio));return B((e=this.balance.ltoken,n=s.div(i),e.lte(n)?e:n),C(0))}},{key:"_calculateEntryPrice",value:function(t){return this.position.volume.eq(0)?C(0):this.position.cost.div(this.position.volume).div(this.multiplier)}},{key:"_calculateMarginHeld",value:function(t){return this.position.volume.abs().times(t).times(this.multiplier).times(this.minInitialMarginRatio)}},{key:"_calculatePnl",value:function(t){return this.position.volume.times(t).times(this.multiplier).minus(this.position.cost)}},{key:"_calculateMaxWithdrawMargin",value:function(t){if(this.position.volume.eq(0))return this.position.margin;var e=this._calculateMarginHeld(t),n=this._calculatePnl(t);return B(this.position.margin.plus(n).minus(e.times(1.02)),C(0))}},{key:"_calculateLiquidationPrice",value:function(t){var e=this.position.cost.minus(this.position.margin).div(this.position.volume).div(this.multiplier),n=this.position.volume.gt(0)?e.div(C(1).minus(this.minMaintenanceMarginRatio)):e.div(C(1).plus(this.minMaintenanceMarginRatio));return n=B(n,C(0))}},{key:"_isOrderValid",value:function(t,e,n){var i=this.position.volume.plus(e).abs().times(t).times(this.multiplier).times(this.minInitialMarginRatio),a=this.states.liquidity.div(this.minPoolMarginRatio).div(t).div(this.multiplier);return this.position.margin.plus(n).gte(i)&&e.lte(a.minus(this.states.tradersNetVolume))&&e.gte(a.negated().minus(this.states.tradersNetVolume))}}]),t}()),M={name:"coming",data:function(){return{connectbtn:!0,address:"",wrong:"",aaddress:""}},mounted:function(){this.connectwallet()},methods:{connectwallet:function(){var t=this;T.connectWallet().then(function(e){if(e.success){t.connectbtn=!1;var n=T.account;t.aaddress=T.account,n=n.slice(0,6)+"***"+n.slice(n.length-4,n.length),t.address=n}else alert(e.error)}).catch(function(t){alert("Cannot connect wallet")})},addU:function(){var t=this,e=a()("#obtainU");this.disableButton(e),this.address&&T.initialize(0).then(function(){T.mint(t.aaddress,1e4).then(function(n){console.log(n),n.success?(t.enableButton(e),alert("You  get 10000 USDT")):t.enableButton(e)}).catch(function(n){t.enableButton(e),console.log(n)})})},addD:function(){var t=this,e=a()("#obtainD");this.disableButton(e);this.address&&T.initialize(1).then(function(){T.mint(t.aaddress,1e4).then(function(n){console.log(n),n.success?(t.enableButton(e),alert("You  get 10000 DAI")):t.enableButton(e)}).catch(function(n){t.enableButton(e),console.log(n)})})},addB:function(){var t=this,e=a()("#obtainB");this.disableButton(e),this.address&&T.initialize(2).then(function(){T.mint(t.aaddress,1e4).then(function(n){console.log(n),n.success?(t.enableButton(e),alert("You  get 10000 BAC")):t.enableButton(e)}).catch(function(n){t.enableButton(e),console.log(n)})})},addBu:function(){var t=this,e=a()("#obtainBn");this.disableButton(e);this.address&&T.initialize(3).then(function(){T.mint(t.aaddress,1e4).then(function(n){console.log(n),n.success?(t.enableButton(e),alert("You  get 10000 BUSD")):t.enableButton(e)}).catch(function(n){t.enableButton(e),console.log(n)})})},addH:function(){var t=this,e=a()("#obtainH");this.disableButton(e);this.address&&T.initialize(4).then(function(){T.mint(t.aaddress,1e4).then(function(n){console.log(n),n.success?(t.enableButton(e),alert("You  get 10000 HUSD")):enableButton(e)}).catch(function(n){t.enableButton(e),console.log(n)})})},disableButton:function(t){t.find("span.spinner").show(),t.attr("disabled",!0)},enableButton:function(t){t.find("span.spinner").hide(),t.attr("disabled",!1)}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"coming"}},[n("nav",{staticClass:"navbar sticky-top navbar-expand-md navbar-dark sidebar-bg bb1 navbar-offcanvas",staticStyle:{height:"80px"}},[n("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),n("div",[t.connectbtn?n("button",{staticClass:"connect br10-rem",attrs:{type:"button",id:"connect-wallet"},on:{click:t.connectwallet}},[t._v("\n          Connect wallet\n        ")]):t._e(),t._v(" "),n("span",{staticClass:"id",staticStyle:{color:"#fff"}},[t._v(" "+t._s(t.address))]),t._v(" "),n("br"),t._v(" "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.wrong))])])])]),t._v(" "),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row  justify-content-center"},[n("div",{staticClass:"mt-2",attrs:{role:"tabpanel"}},[n("div",{staticClass:"input-group mb-3",staticStyle:{color:"white"}},[t._v("\n                  Wallet Address:  "),n("span",{attrs:{id:"address"}},[t._v(t._s(t.aaddress))])]),t._v(" "),n("div",{staticClass:"w-100 text-center mt-2 mb-2"},[n("button",{attrs:{type:"button",id:"obtainU"},on:{click:t.addU}},[n("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                      Obtain USDT ")]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("button",{attrs:{type:"button",id:"obtainD"},on:{click:t.addD}},[n("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                      Obtain DAI")]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("button",{attrs:{type:"button",id:"obtainB"},on:{click:t.addB}},[n("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                      Obtain BAC")]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("button",{attrs:{type:"button",id:"obtainBn"},on:{click:t.addBu}},[n("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                      Obtain BUSD")]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("button",{attrs:{type:"button",id:"obtainH"},on:{click:t.addH}},[n("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                      Obtain HUSD")])]),t._v(" "),t._m(1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a",{attrs:{href:"https://deri.finance"}},[e("img",{staticStyle:{width:"6.9rem",height:"2rem"},attrs:{src:n("xAza")}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"center","margin-top":"100px",color:"white"}},[t._v("\n                  Go to the link below if you need Ropsten ETH:\n                  "),n("br"),t._v(" "),n("a",{attrs:{href:"https://faucet.ropsten.be/"}},[t._v("ETH Faucet")]),t._v(" "),n("br"),t._v("\n                  Go to the link below if you need testnet BNB:\n                  "),n("br"),t._v(" "),n("a",{attrs:{href:"https://testnet.binance.org/faucet-smart"}},[t._v("BNB Faucet")]),t._v(" "),n("br"),t._v("\n                  Go to the link below if you need testnet HT:\n                  "),n("br"),t._v(" "),n("a",{attrs:{href:"https://scan-testnet.hecochain.com/faucet"}},[t._v("HT Faucet")])])}]};var q=n("C7Lr")(M,S,!1,function(t){n("AwFO")},"data-v-4f51f800",null);e.default=q.exports}});